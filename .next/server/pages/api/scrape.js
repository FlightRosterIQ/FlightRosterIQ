"use strict";(()=>{var e={};e.id=713,e.ids=[713],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},249:(e,r)=>{Object.defineProperty(r,"l",{enumerable:!0,get:function(){return function e(r,s){return s in r?r[s]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,s)):"function"==typeof r&&"default"===s?r:void 0}}})},622:(e,r,s)=>{s.r(r),s.d(r,{config:()=>p,default:()=>d,routeModule:()=>m});var t={};s.r(t),s.d(t,{config:()=>l,default:()=>c});var o=s(802),a=s(153),n=s(249);let{scrapeCrewSchedule:i,getCrewNotifications:u}=require("../../crew-scraper.cjs");async function c(e,r){if(r.setHeader("Access-Control-Allow-Origin","*"),r.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS"),r.setHeader("Access-Control-Allow-Headers","Content-Type, Authorization"),"OPTIONS"===e.method)return r.status(200).end();if("POST"!==e.method&&"GET"!==e.method)return r.status(405).json({success:!1,error:"Method not allowed. Use POST or GET."});try{console.log("\uD83D\uDE80 Crew scraper API called");let s={airline:e.body?.airline||e.query.airline||process.env.CREW_AIRLINE||"ABX Air",username:e.body?.username||e.query.username,password:e.body?.password||e.query.password,headless:!0};if(!s.username||!s.password)return r.status(400).json({success:!1,error:"Please provide your crew portal username and password.",message:"For security, each pilot must enter their own credentials to access their personal schedule.",required:["username","password"]});console.log(`ðŸ“‹ Scraping for airline: ${s.airline||"ABX Air"}`);let t=await u(s);if(t.success)return console.log("âœ… Scraping completed successfully"),r.status(200).json({success:!0,data:t.data,timestamp:t.timestamp,message:"Schedule data retrieved successfully"});return console.error("âŒ Scraping failed:",t.error),r.status(500).json({success:!1,error:t.error,timestamp:t.timestamp})}catch(e){return console.error("âŒ API Error:",e.message),r.status(500).json({success:!1,error:e.message,timestamp:new Date().toISOString()})}}let l={api:{responseLimit:!1,bodyParser:{sizeLimit:"1mb"}},maxDuration:60},d=(0,n.l)(t,"default"),p=(0,n.l)(t,"config"),m=new o.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/scrape",pathname:"/api/scrape",bundlePath:"",filename:""},userland:t})},153:(e,r)=>{var s;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},802:(e,r,s)=>{e.exports=s(145)}};var r=require("../../webpack-api-runtime.js");r.C(e);var s=r(r.s=622);module.exports=s})();